# ðŸš€ Production Setup: VPC + ASG + LB
### Q: What is the general workflow of setting up Auto Scaling Group (ASG) with a Load Balancer (LB) in a VPC?
### 1. **VPC Setup**
* Create **VPC** â†’ define **CIDR block**.
* Create **subnets** (at least 2 in different AZs for HA).
* Attach **Internet Gateway (IGW)** for public access.
* Create **Route Table** (public â†’ IGW, private â†’ NAT if needed).
* Configure **Security Groups (SG)** for LB & ASG.
### 2. **Launch Template (LT)**
* Go to **EC2 â†’ Launch Templates**.
* Configure:
  * **Name**
  * **AMI** (Amazon Linux, Ubuntu, etc.)
  * **Instance type**
  * **Key Pair** (for SSH)
  * **Security Group** (allow app ports, e.g., 22, 80, 443)
  * **VPC & Subnet** selection.
* Save template.
### 3. **Auto Scaling Group (ASG)**
* Create **ASG** â†’ choose **Launch Template**.
* Select **VPC** & **at least 2 subnets** (for HA).
* Configure **Desired, Min, Max capacity**.
* Attach **Load Balancer (ALB/NLB/CLB)**.
* Attach **Target Group** (where LB will route traffic).
* Add **Scaling Policy**:
  * **Target Tracking Policy** (e.g., scale out at 70% CPU).
  * **Step Scaling** (optional).
### 4. **Load Balancer (LB)**
* Create **Application Load Balancer (ALB)**:
  * **Name**
  * Select **VPC**
  * **AZs** (public subnets for LB)
  * Attach **Security Group** (allow inbound: 80/443).
* Add **Listeners** (HTTP/HTTPS).
* Forward requests to **Target Group**.
### 5. **Target Group**
* Create **Target Group**:
  * Type: **Instance / IP / Lambda** (commonly Instance/IP).
  * Attach **VPC**.
  * Select **Instances** (ASG instances auto-register).
  * Configure **Health Checks** (e.g., `/health`, TCP/HTTP).
### 6. **Traffic Flow (Interview Answer)**
ðŸ‘‰ **Internet â†’ VPC IGW â†’ ALB (public subnet) â†’ Target Group â†’ ASG instances (private subnets) â†’ Response back to user**


---
